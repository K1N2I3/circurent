# 快速迁移指南：location → owner_name

## 🚀 快速步骤（3 分钟完成）

### 方法 1: 使用 Supabase Dashboard（最简单）

1. **打开 Supabase Dashboard**
   - 访问 https://supabase.com/dashboard
   - 选择你的项目

2. **打开 SQL Editor**
   - 点击左侧菜单的 **"SQL Editor"**
   - 点击 **"New query"** 按钮

3. **复制并执行以下 SQL**
   ```sql
   -- 添加新列
   ALTER TABLE items ADD COLUMN IF NOT EXISTS owner_name TEXT;
   
   -- 更新所有数据
   UPDATE items SET owner_name = 'CircuRent';
   ```

4. **验证结果**
   - 点击左侧菜单的 **"Table Editor"**
   - 打开 `items` 表
   - 确认 `owner_name` 列已创建，所有值都是 `CircuRent`

5. **（可选）删除旧列**
   - 确认一切正常后，可以删除 `location` 列：
   ```sql
   ALTER TABLE items DROP COLUMN location;
   ```

### 方法 2: 使用项目中的 SQL 文件

1. **打开项目中的 `supabase_migration.sql` 文件**
2. **复制所有内容**
3. **在 Supabase SQL Editor 中粘贴并执行**

## ✅ 验证步骤

执行 SQL 后，检查：

1. **在 Table Editor 中查看 `items` 表**
   - 应该看到 `owner_name` 列
   - 所有记录的 `owner_name` 都应该是 `CircuRent`

2. **刷新前端页面**
   - 商品列表应该显示 "👤 CircuRent" 而不是位置
   - 商品详情页应该显示 "Owner: CircuRent"

## ⚠️ 注意事项

- **备份数据**：虽然这个操作很安全，但建议先备份（Supabase 会自动备份）
- **向后兼容**：代码已经支持同时读取 `owner_name` 和 `location`，所以即使不删除 `location` 列也可以正常工作
- **新商品**：新创建的商品会自动使用 `ownerName: 'CircuRent'`

## 🐛 如果遇到问题

如果执行 SQL 时出错：

1. **检查表名**：确认表名是 `items`（不是 `item`）
2. **检查权限**：确保使用正确的数据库角色
3. **查看错误信息**：Supabase 会显示详细的错误信息

## 📝 SQL 说明

- `ADD COLUMN IF NOT EXISTS`：如果列已存在则不会报错
- `UPDATE ... SET owner_name = 'CircuRent'`：更新所有记录
- `DROP COLUMN`：删除旧列（可选）

